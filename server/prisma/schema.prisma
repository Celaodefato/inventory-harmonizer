// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Endpoint {
  id               String   @id @default(uuid())
  hostname         String   @unique
  user             String?
  ip               String?
  lastSeen         DateTime?
  os               String?
  
  // Sources presence
  inVicarius       Boolean  @default(false)
  inCortex         Boolean  @default(false)
  inWarp           Boolean  @default(false)
  inPam            Boolean  @default(false)
  inJumpCloud      Boolean  @default(false)
  
  // Status attributes
  isNonCompliant   Boolean  @default(false)
  isTerminated     Boolean  @default(false)
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Alert {
  id        String   @id @default(uuid())
  title     String
  message   String
  type      String   // info, warning, error
  source    String?
  timestamp DateTime @default(now())
}

model OffboardingAlert {
  id          String   @id @default(uuid())
  employeeId  String
  employeeName String
  status      String   // pending, in_progress, completed
  riskLevel   String   // low, medium, high
  details     String?  // JSON string or long text
  timestamp   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model SyncLog {
  id            String   @id @default(uuid())
  timestamp     DateTime @default(now())
  status        String   // success, error
  message       String
  details       String?
  vicariusCount Int      @default(0)
  cortexCount   Int      @default(0)
  warpCount     Int      @default(0)
  pamCount      Int      @default(0)
  jumpcloudCount Int     @default(0)
}

model ApiConfig {
  id        String   @id @default(uuid())
  toolName  String   @unique // vicarius, cortex, etc
  apiKey    String?
  baseUrl   String?
  lastSync  DateTime?
  updatedAt DateTime @updatedAt
}
